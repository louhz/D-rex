<mujoco model="franka_allegro">
  <compiler angle="radian" meshdir="assets" autolimits="true"/>
  <option integrator="implicitfast"/>

  <!-- Include Franka and Allegro default classes -->
  <!-- Default definitions omitted for brevity; include from original models -->

  <asset>
    <!-- Combine assets from Franka and Allegro -->
    <!-- Franka assets -->
    <!-- Allegro assets -->
  </asset>

  <worldbody>
    <!-- Franka robot up to link7 -->
    <body name="link0" childclass="panda">
      <!-- Full Franka link chain from link0 to link7 (same as original Franka XML) -->
      <!-- ... truncated here for brevity, but all links and bodies from your original Franka file go here -->

      <body name="link7" pos="0.088 0 0" quat="1 1 0 0">
        <joint name="joint7"/>
        <geom mesh="link7_0" material="white" class="visual"/>
        <geom mesh="link7_1" material="black" class="visual"/>
        <geom mesh="link7_c" class="collision"/>

        <!-- Allegro Right Hand -->
        <body name="allegro_hand" pos="0 0 0.107" quat="0.9238795 0 0 -0.3826834" childclass="allegro_right">
          <geom class="palm_visual" mesh="base_link"/>
          <geom class="palm_collision"/>

          <!-- FF Finger -->
          <body name="ff_base" pos="0 0.0435 -0.001542" quat="0.999048 -0.0436194 0 0">
            <joint name="ffj0" class="base" />
            <geom class="base_visual" />
            <geom class="base_collision" />
            <body name="ff_proximal" pos="0 0 0.0164">
              <joint name="ffj1" class="proximal" />
              <geom class="proximal_visual" />
              <geom class="proximal_collision" />
              <body name="ff_medial" pos="0 0 0.054">
                <joint name="ffj2" class="medial" />
                <geom class="medial_visual" />
                <geom class="medial_collision" />
                <body name="ff_distal" pos="0 0 0.0384">
                  <joint name="ffj3" class="distal" />
                  <geom class="distal_visual" />
                  <geom class="distal_collision" />
                  <body name="ff_tip">
                    <geom class="fingertip_visual" />
                    <geom class="fingertip_collision" />
                  </body>
                </body>
              </body>
            </body>
          </body>

          <!-- MF Finger -->
          <body name="mf_base" pos="0 0 0.0007">
            <joint name="mfj0" class="base" />
            <geom class="base_visual" />
            <geom class="base_collision" />
            <body name="mf_proximal" pos="0 0 0.0164">
              <joint name="mfj1" class="proximal" />
              <geom class="proximal_visual" />
              <geom class="proximal_collision" />
              <body name="mf_medial" pos="0 0 0.054">
                <joint name="mfj2" class="medial" />
                <geom class="medial_visual" />
                <geom class="medial_collision" />
                <body name="mf_distal" pos="0 0 0.0384">
                  <joint name="mfj3" class="distal" />
                  <geom class="distal_visual" />
                  <geom class="distal_collision" />
                  <body name="mf_tip">
                    <geom class="fingertip_visual" />
                    <geom class="fingertip_collision" />
                  </body>
                </body>
              </body>
            </body>
          </body>

          <!-- RF Finger -->
          <body name="rf_base" pos="0 -0.0435 -0.001542" quat="0.999048 0.0436194 0 0">
            <joint name="rfj0" class="base" />
            <geom class="base_visual" />
            <geom class="base_collision" />
            <body name="rf_proximal" pos="0 0 0.0164">
              <joint name="rfj1" class="proximal" />
              <geom class="proximal_visual" />
              <geom class="proximal_collision" />
              <body name="rf_medial" pos="0 0 0.054">
                <joint name="rfj2" class="medial" />
                <geom class="medial_visual" />
                <geom class="medial_collision" />
                <body name="rf_distal" pos="0 0 0.0384">
                  <joint name="rfj3" class="distal" />
                  <geom class="distal_visual" />
                  <geom class="distal_collision" />
                  <body name="rf_tip">
                    <geom class="fingertip_visual" />
                    <geom class="fingertip_collision" />
                  </body>
                </body>
              </body>
            </body>
          </body>

          <!-- Thumb Finger -->
          <body name="th_base" pos="-0.0182 0.019333 -0.045987" quat="0.477714 -0.521334 -0.521334 -0.477714">
            <joint name="thj0" class="thumb_base" />
            <geom class="visual" mesh="link_12.0_right" />
            <geom class="thumb_base_collision" />
            <body name="th_proximal" pos="-0.027 0.005 0.0399">
              <joint name="thj1" class="thumb_proximal" />
              <geom class="visual" mesh="link_13.0" />
              <geom class="thumb_proximal_collision" />
              <body name="th_medial" pos="0 0 0.0177">
                <joint name="thj2" class="thumb_medial" />
                <geom class="visual" mesh="link_14.0" />
                <geom class="thumb_medial_collision" />
                <body name="th_distal" pos="0 0 0.0514">
                  <joint name="thj3" class="thumb_distal" />
                  <geom class="visual" mesh="link_15.0" />
                  <geom class="thumb_distal_collision" />
                  <body name="th_tip">
                    <geom class="thumbtip_visual" />
                    <geom class="thumbtip_collision" />
                  </body>
                </body>
              </body>
            </body>
          </body>
        </body>
      </body>
    </body>
  </worldbody>

  <actuator>
    <!-- Franka actuators from original file -->
    <!-- Allegro actuators -->
    <position name="ffa0" joint="ffj0" class="base" />
    <position name="ffa1" joint="ffj1" class="proximal" />
    <position name="ffa2" joint="ffj2" class="medial" />
    <position name="ffa3" joint="ffj3" class="distal" />

    <position name="mfa0" joint="mfj0" class="base" />
    <position name="mfa1" joint="mfj1" class="proximal" />
    <position name="mfa2" joint="mfj2" class="medial" />
    <position name="mfa3" joint="mfj3" class="distal" />

    <position name="rfa0" joint="rfj0" class="base" />
    <position name="rfa1" joint="rfj1" class="proximal" />
    <position name="rfa2" joint="rfj2" class="medial" />
    <position name="rfa3" joint="rfj3" class="distal" />

    <position name="tha0" joint="thj0" class="thumb_base" />
    <position name="tha1" joint="thj1" class="thumb_proximal" />
    <position name="tha2" joint="thj2" class="thumb_medial" />
    <position name="tha3" joint="thj3" class="thumb_distal" />
  </actuator>
</mujoco>

